# 删除站点内容列 - 需求对齐文档

## 项目特性规范

### 现有项目架构分析
- **技术栈**: React + TypeScript + Tailwind CSS + Supabase
- **组件架构**: 基于Hook的状态管理，模块化组件设计
- **UI框架**: 自定义组件库 + Material-UI + Lucide图标
- **数据管理**: 自定义Hooks (useContentData, useTableOperations, usePagination)

### 当前信息管理页面结构

#### 1. 组件层次结构
```
InfoManagementContainer
├── TabNavigation (标签页导航)
│   ├── 站点内容 (site_content)
│   ├── 导航菜单 (navigation)
│   ├── UI文本 (ui_texts)
│   ├── 页面区域 (page_sections)
│   └── SEO元数据 (seo_metadata)
├── DataTable (数据表格)
│   ├── 列标题显示行
│   ├── 表格头部 (排序功能)
│   ├── 数据行 (编辑/删除操作)
│   └── 分页控件
├── EditModal (编辑模态框)
└── 确认删除对话框
```

#### 2. 站点内容表格当前列配置
根据 `DataTable.tsx` 中的 `DEFAULT_COLUMNS.site_content` 配置：

1. **键名列** (`key`)
   - 标题: "键名"
   - 宽度: 200px
   - 功能: 可排序、可搜索
   - 渲染: 使用 `<code>` 标签显示，带有灰色背景

2. **内容列** (`value`)
   - 标题: "内容"
   - 宽度: 300px
   - 功能: 可搜索
   - 渲染: 截断显示，带有 tooltip

3. **描述列** (`description`)
   - 标题: "描述"
   - 宽度: 200px
   - 功能: 可搜索
   - 渲染: 显示描述或 "-" 占位符

4. **创建时间列** (`created_at`)
   - 标题: "创建时间"
   - 宽度: 150px
   - 功能: 可排序
   - 渲染: 格式化为中文日期

## 原始需求
"信息管理页面的站点内容，删掉键名和内容两列"

## 需求理解

### 具体要求
1. **删除键名列**: 移除站点内容表格中的 "键名" 列
2. **删除内容列**: 移除站点内容表格中的 "内容" 列
3. **保留其他列**: 保留 "描述" 和 "创建时间" 列
4. **仅影响站点内容**: 其他表格类型（导航菜单、UI文本等）不受影响

### 影响分析

#### 1. 数据显示影响
- 删除键名列后，用户无法直接看到内容的唯一标识符
- 删除内容列后，用户无法直接预览内容文本
- 表格将只显示描述和创建时间信息

#### 2. 功能影响
- 搜索功能：失去对键名和内容的搜索能力
- 排序功能：失去对键名的排序能力
- 编辑功能：编辑操作仍可通过操作列进行

#### 3. 用户体验影响
- 信息密度降低：表格显示的有用信息减少
- 识别困难：用户可能难以区分不同的内容项
- 操作依赖：用户需要通过编辑功能查看完整信息

## 边界确认

### 功能边界
- **仅修改站点内容表格**: 不影响其他表格类型的列配置
- **保持现有功能**: 编辑、删除、添加等操作功能不变
- **保持数据结构**: 不修改数据库表结构或数据获取逻辑
- **保持组件架构**: 不改变现有组件层次和状态管理

### 技术边界
- **修改范围**: 仅修改 `DataTable.tsx` 中的列配置
- **兼容性要求**: 保持与现有Hook和服务的兼容
- **响应式设计**: 保持现有的响应式布局

## 疑问澄清

### 需要确认的问题
1. **用户识别方案**: 删除键名和内容列后，用户如何识别和区分不同的内容项？
2. **搜索功能**: 是否需要保留对键名和内容的搜索功能？
3. **列宽调整**: 删除两列后，是否需要调整剩余列的宽度？
4. **替代显示**: 是否需要在描述列中显示更多信息来补偿删除的列？
5. **操作便捷性**: 用户是否能接受通过编辑功能查看完整信息的操作方式？

### 潜在风险
1. **可用性下降**: 表格信息过少可能影响用户操作效率
2. **识别困难**: 用户可能难以快速找到目标内容项
3. **工作流中断**: 频繁打开编辑框查看信息可能影响工作效率

## 实现方案预览

### 技术实现
修改 `/Users/changhao/Desktop/网站测试/frontend/src/components/InfoManagement/DataTable.tsx` 文件中的 `DEFAULT_COLUMNS.site_content` 配置，移除键名和内容列的定义。

### 修改后的列配置
```typescript
site_content: [
  {
    key: 'description',
    title: '描述',
    width: 300, // 可能需要调整宽度
    searchable: true,
    render: (value) => value || <span className="text-gray-400">-</span>
  },
  {
    key: 'created_at',
    title: '创建时间',
    width: 200, // 可能需要调整宽度
    sortable: true,
    render: (value) => new Date(value).toLocaleDateString('zh-CN')
  }
]
```

## 验收标准

### 功能验收
1. 站点内容表格不再显示 "键名" 列
2. 站点内容表格不再显示 "内容" 列
3. 站点内容表格正常显示 "描述" 和 "创建时间" 列
4. 其他表格类型（导航菜单、UI文本等）的列配置不受影响
5. 编辑、删除、添加等操作功能正常工作
6. 表格布局美观，列宽合理

### 技术验收
1. 代码修改符合现有项目规范
2. 不破坏现有组件架构和状态管理
3. 响应式布局正常工作
4. 无TypeScript类型错误
5. 无运行时错误

### 用户体验验收
1. 表格加载和渲染正常
2. 剩余列的显示效果良好
3. 操作按钮和功能可正常访问
4. 整体视觉效果协调统一